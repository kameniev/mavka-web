{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Acer\\\\Desktop\\\\mavka-web\\\\src\\\\screens\\\\Subject\\\\Subject.jsx\";\nimport React from 'react';\nimport firebase from \"../../global\";\nimport { Redirect, Link } from 'react-router-dom';\nimport axios from \"axios\";\nimport ListItem from \"../../UI/ListItem\";\nimport TestStatus from \"../TestStatus\";\nexport class Subject extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAuthStatus = () => {\n      firebase.auth().onAuthStateChanged(resp => {\n        // Pass response to a call back func to update state\n        this.updateUserState(resp);\n      });\n    };\n\n    this.token = \"\";\n    this.state = {\n      subject: this.props.match.params.id,\n      user: 25,\n      tests: [],\n      status: null\n    };\n  }\n\n  componentDidMount() {\n    this.getAuthStatus();\n  } // Get firebase auth status.\n\n\n  // update state\n  updateUserState(resp) {\n    this.setState({\n      user: resp\n    });\n    let current = this;\n    let token = resp.getIdToken().then(function (token) {\n      //alert(token);\n      current.token = token;\n      const response = axios.post('https://us-central1-mavka-c5c01.cloudfunctions.net/getTestsBySubject', {\n        token: token,\n        subject: current.state.subject\n      }, {\n        headers: {\n          'Content-Type': 'text/plain'\n        }\n      });\n      response.then(function (value) {\n        let tests = [];\n        let T = value.data;\n\n        for (let year in T) {\n          for (let t in T[year]) {\n            console.log(T[year][t].status);\n            tests.push({\n              name: T[year][t].type + \" \" + year,\n              status: T[year][t].status,\n              id: T[year][t].id,\n              ref: T[year][t].ref\n            });\n          }\n        }\n\n        current.setState({\n          tests: tests\n        });\n      });\n    });\n  }\n\n  render() {\n    if (this.state.user == 25) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }\n      });\n    }\n\n    if (this.state.user) {\n      const test = this.state.tests;\n      let code = test.map(info => /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => {\n          this.props.history.push(\"/subject/\" + this.state.subject + \"/test/\" + info.id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ListItem, {\n        text: info.name,\n        pushed: null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      })));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          float: \"left\",\n          width: \"50%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }\n      }, this.state.subject, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 46\n        }\n      }), code), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(TestStatus, {\n        status: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 16\n      }\n    });\n  }\n\n}\nexport default Subject;","map":{"version":3,"sources":["C:/Users/Acer/Desktop/mavka-web/src/screens/Subject/Subject.jsx"],"names":["React","firebase","Redirect","Link","axios","ListItem","TestStatus","Subject","Component","constructor","props","getAuthStatus","auth","onAuthStateChanged","resp","updateUserState","token","state","subject","match","params","id","user","tests","status","componentDidMount","setState","current","getIdToken","then","response","post","headers","value","T","data","year","t","console","log","push","name","type","ref","render","test","code","map","info","history","float","width"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport firebase from \"../../global\"\r\nimport {Redirect, Link} from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport ListItem from \"../../UI/ListItem\";\r\nimport TestStatus from \"../TestStatus\";\r\n\r\n\r\nexport class Subject extends React.Component{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.token = \"\";\r\n        this.state = {\r\n            subject: this.props.match.params.id,\r\n            user: 25,\r\n            tests: [],\r\n            status: null\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getAuthStatus();\r\n    }\r\n\r\n    // Get firebase auth status.\r\n    getAuthStatus = () => {\r\n        firebase.auth().onAuthStateChanged((resp) => {\r\n            // Pass response to a call back func to update state\r\n            this.updateUserState(resp);\r\n        });\r\n    }\r\n\r\n    // update state\r\n    updateUserState (resp) {\r\n        this.setState({\r\n            user: resp\r\n        });\r\n\r\n        let current = this;\r\n\r\n        let token = resp.getIdToken().then(function (token) {\r\n            //alert(token);\r\n            current.token = token;\r\n            const response = axios.post(\r\n                'https://us-central1-mavka-c5c01.cloudfunctions.net/getTestsBySubject',\r\n                {\r\n                    token: token,\r\n                    subject: current.state.subject\r\n                },\r\n                { headers: { 'Content-Type': 'text/plain' } }\r\n            );\r\n\r\n            response.then(function (value) {\r\n                let tests = []\r\n                let T = value.data;\r\n                for (let year in T) {\r\n                    for (let t in T[year]) {\r\n                        console.log(T[year][t].status);\r\n                        tests.push({\r\n                            name: T[year][t].type + \" \" + year,\r\n                            status: T[year][t].status,\r\n                            id: T[year][t].id,\r\n                            ref: T[year][t].ref\r\n                        })\r\n                    }\r\n                }\r\n                current.setState({\r\n                    tests: tests\r\n                })\r\n            });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if (this.state.user == 25) {\r\n            return (<div></div>);\r\n        }\r\n        if (this.state.user) {\r\n            const test = this.state.tests;\r\n            let code = test.map((info) => (\r\n                <button\r\n                    onClick={() => {\r\n                        this.props.history.push(\"/subject/\" + this.state.subject + \"/test/\" + info.id)\r\n                    }}\r\n                >\r\n                    <ListItem\r\n                        text={info.name}\r\n                        pushed={null}/>\r\n                </button>\r\n            ))\r\n            return (\r\n                <div>\r\n                    <div style={{float: \"left\", width:\"50%\"}}>\r\n                        {this.state.subject} <br/>\r\n                        {code}\r\n                    </div>\r\n                    <div>\r\n                        <TestStatus\r\n                            status={\"\"}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        return(<Redirect to=\"/login\"/>);\r\n    }\r\n}\r\n\r\nexport default Subject;"]},"metadata":{},"sourceType":"module"}