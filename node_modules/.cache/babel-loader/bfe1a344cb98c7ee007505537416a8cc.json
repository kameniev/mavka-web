{"ast":null,"code":"import axios from \"axios\";\nimport firebase from \"../global\";\n\nclass Services {\n  constructor() {}\n\n  static async getData(ref) {\n    var storage = firebase.storage();\n    var listRef = storage.refFromURL(ref);\n    console.log(listRef);\n    const list1 = await listRef.listAll().then(function (res) {\n      var list = [];\n      res.items.forEach(function (itemRef) {\n        list.push(itemRef.getDownloadURL());\n      });\n      return list;\n    }).catch(function (error) {\n      console.log(error);\n    });\n    const results1 = await Promise.all(list1);\n    var list2 = [];\n    results1.forEach(url => {\n      list2.push(axios.post('https://us-central1-mavka-c5c01.cloudfunctions.net/getReq', {\n        url: url\n      }, {\n        headers: {\n          'Content-Type': 'text/plain'\n        }\n      }));\n    });\n    const results2 = await Promise.all(list2);\n    let answer = [];\n    results2.forEach(resp => {\n      answer.push(resp.data);\n    });\n    console.log(answer);\n    return answer;\n  }\n\n  async getReferenceById(id) {\n    const firestore = firebase.firestore();\n    return await firestore.collection(\"practices_id\").doc(id).getData().ref;\n  }\n\n}\n\nexport default Services;","map":{"version":3,"sources":["C:/Users/Acer/Desktop/mavka-web/src/Services/Services.js"],"names":["axios","firebase","Services","constructor","getData","ref","storage","listRef","refFromURL","console","log","list1","listAll","then","res","list","items","forEach","itemRef","push","getDownloadURL","catch","error","results1","Promise","all","list2","url","post","headers","results2","answer","resp","data","getReferenceById","id","firestore","collection","doc"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;;AAEA,MAAMC,QAAN,CAAe;AACXC,EAAAA,WAAW,GAAG,CAAE;;AAEhB,eAAaC,OAAb,CAAsBC,GAAtB,EAA0B;AACtB,QAAIC,OAAO,GAAGL,QAAQ,CAACK,OAAT,EAAd;AACA,QAAIC,OAAO,GAAGD,OAAO,CAACE,UAAR,CAAmBH,GAAnB,CAAd;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AACA,UAAMI,KAAK,GAAG,MAAMJ,OAAO,CAACK,OAAR,GAAkBC,IAAlB,CAAuB,UAASC,GAAT,EAAc;AACrD,UAAIC,IAAI,GAAG,EAAX;AACAD,MAAAA,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkB,UAASC,OAAT,EAAkB;AAChCH,QAAAA,IAAI,CAACI,IAAL,CAAUD,OAAO,CAACE,cAAR,EAAV;AACH,OAFD;AAGA,aAAOL,IAAP;AACH,KANmB,EAOfM,KAPe,CAOT,UAASC,KAAT,EAAgB;AACnBb,MAAAA,OAAO,CAACC,GAAR,CAAYY,KAAZ;AACH,KATe,CAApB;AAUA,UAAMC,QAAQ,GAAG,MAAMC,OAAO,CAACC,GAAR,CAAYd,KAAZ,CAAvB;AACA,QAAIe,KAAK,GAAG,EAAZ;AACAH,IAAAA,QAAQ,CAACN,OAAT,CAAiBU,GAAG,IAAI;AACpBD,MAAAA,KAAK,CAACP,IAAN,CAAWnB,KAAK,CAAC4B,IAAN,CACP,2DADO,EAEP;AACID,QAAAA,GAAG,EAAEA;AADT,OAFO,EAKP;AAAEE,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AAAX,OALO,CAAX;AAOH,KARD;AASA,UAAMC,QAAQ,GAAG,MAAMN,OAAO,CAACC,GAAR,CAAYC,KAAZ,CAAvB;AACA,QAAIK,MAAM,GAAG,EAAb;AACAD,IAAAA,QAAQ,CAACb,OAAT,CAAiBe,IAAI,IAAI;AACrBD,MAAAA,MAAM,CAACZ,IAAP,CAAYa,IAAI,CAACC,IAAjB;AACH,KAFD;AAGAxB,IAAAA,OAAO,CAACC,GAAR,CAAYqB,MAAZ;AACA,WAAOA,MAAP;AACH;;AAED,QAAOG,gBAAP,CAAyBC,EAAzB,EAA6B;AACzB,UAAMC,SAAS,GAAGnC,QAAQ,CAACmC,SAAT,EAAlB;AACA,WAAO,MAAMA,SAAS,CAACC,UAAV,CAAqB,cAArB,EAAqCC,GAArC,CAAyCH,EAAzC,EAA6C/B,OAA7C,GAAuDC,GAApE;AACH;;AAxCU;;AA0Cf,eAAeH,QAAf","sourcesContent":["import axios from \"axios\";\r\nimport firebase from \"../global\"\r\n\r\nclass Services {\r\n    constructor() {}\r\n\r\n    static async getData (ref){\r\n        var storage = firebase.storage();\r\n        var listRef = storage.refFromURL(ref);\r\n        console.log(listRef)\r\n        const list1 = await listRef.listAll().then(function(res) {\r\n            var list = [];\r\n            res.items.forEach(function(itemRef) {\r\n                list.push(itemRef.getDownloadURL())\r\n            });\r\n            return list\r\n        })\r\n            .catch(function(error) {\r\n                console.log(error)\r\n            });\r\n        const results1 = await Promise.all(list1);\r\n        var list2 = [];\r\n        results1.forEach(url => {\r\n            list2.push(axios.post(\r\n                'https://us-central1-mavka-c5c01.cloudfunctions.net/getReq',\r\n                {\r\n                    url: url\r\n                },\r\n                { headers: { 'Content-Type': 'text/plain' } }\r\n            ))\r\n        })\r\n        const results2 = await Promise.all(list2);\r\n        let answer = [];\r\n        results2.forEach(resp => {\r\n            answer.push(resp.data)\r\n        });\r\n        console.log(answer)\r\n        return answer\r\n    }\r\n\r\n    async  getReferenceById (id) {\r\n        const firestore = firebase.firestore();\r\n        return await firestore.collection(\"practices_id\").doc(id).getData().ref;\r\n    }\r\n}\r\nexport default Services;\r\n"]},"metadata":{},"sourceType":"module"}